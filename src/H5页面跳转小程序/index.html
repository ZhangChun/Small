<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection"content="telephone=no, email=no" />
  <title>小程序嵌入h5</title>
  <script src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js" charset="utf-8"></script>
  <script src="./js/vconsole.min.js"></script>
  <style type="text/css">
    *{margin:0;padding:0;}
    #app{text-align: center;}
    #avatarUrl{margin: 20% 0 5%;}
    #nickName, #url{margin-bottom: 5%;}
    button{
    	padding: 10px 20px;
	    border: none;
	    background: #04c79d;
	    color: #fff;
    }
  </style>
</head>
<body>
  <div id="app"> 
    <img id="avatarUrl" src="" alt="" />
    <h3 id="nickName"></h3>
    <h3>登录成功</h3>
    <h3 id="openid"></h3>
    <h3 id="url"></h3>
    <button onclick="backWx()">返回到小程序</button>
  </div>
  <script>
    var VC = new VConsole();
    var _shareContent = {
      title: '我是嵌入到微信小程序里面的h5',
      path: '/pages/webview/webview?abc=88888'
    }
    wx.miniProgram.postMessage({ data: _shareContent });
    function backWx() {
      wx.miniProgram.redirectTo({url: '/pages/index/index'})
    }
    
    // wx.miniProgram.getEnv(function(res) {
    //   console.log(res.miniprogram) // true 
    // })
    //  生成随机的  uuid
    function generateUUID() {
	    var d = new Date().getTime();
	    if(window.performance && typeof window.performance.now === "function"){
	        d += performance.now(); //use high-precision timer if available
	    }
	    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
	        var r = (d + Math.random()*16)%16 | 0;
	        d = Math.floor(d/16);
	        return (c=='x' ? r : (r&0x3|0x8)).toString(16);
	    });
	    console.log("uuuuuuuuuuuuuuuuuid",uuid)
	    return uuid;
		}
    generateUUID()
  </script>
</body>
</html>